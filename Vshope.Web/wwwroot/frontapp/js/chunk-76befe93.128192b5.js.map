{"version":3,"sources":["webpack:///./src/views/InvoiceManager.vue?15c1","webpack:///./src/views/InvoiceManager.vue?c2c3","webpack:///src/views/InvoiceManager.vue","webpack:///./src/views/InvoiceManager.vue?ff4f","webpack:///./src/views/InvoiceManager.vue?eaf9"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","color","$t","staticRenderFns","component"],"mappings":"kHAAA,yBAA0e,EAAG,G,kECA7e,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,cAAc,GAAG,MAAQ,GAAG,eAAe,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,SAAS,CAACA,EAAG,gBAAgB,CAACG,YAAY,OAAOD,MAAM,CAAC,MAAQN,EAAIQ,MAAM,MAAQR,EAAIS,GAAG,yBAAyB,YAAY,aAAa,IAAI,IAAI,IAC/VC,EAAkB,GCwMtB,KCzMwV,I,wBCQpVC,EAAY,eACd,EACAZ,EACAW,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-76befe93.128192b5.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InvoiceManager.vue?vue&type=style&index=0&id=03e20aee&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InvoiceManager.vue?vue&type=style&index=0&id=03e20aee&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',[_c('material-card',{staticClass:\"mt-0\",attrs:{\"color\":_vm.color,\"title\":_vm.$t('common.invoiceManager'),\"max-width\":\"1100px\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <v-container\n    fill-height\n    fluid\n    grid-list-xl\n  >\n    <v-layout wrap>\n      <v-flex>\n        <material-card\n          :color=\"color\"\n          :title=\"$t('common.invoiceManager')\"\n          max-width=\"1100px\"\n          class=\"mt-0\"\n        >\n          <!-- <v-container\n            py-0\n            px-3>\n            <v-layout column>\n              <v-flex>\n                <material-date-month-input\n                  :date-ext=\"dateFilterDisplay\"\n                  label=\"invoiceManager.dateFilter\"\n                  @change=\"parseDateFilterAndRefresh\"\n                />\n              </v-flex>\n              <v-flex>\n                <v-data-table\n                  :headers=\"invoiceHeaders\"\n                  :items=\"invoiceItems\"\n                  :total-items=\"invoiceTotal\"\n                  :pagination.sync=\"pagination\"\n                >\n                  <template\n                    slot=\"items\"\n                    slot-scope=\"props\">\n                    <td class=\"text-truncate item-shop-name-col\">\n                      <router-link\n                        :to=\"`/shop/${props.item.shop.id}?curTab=tab-5`\">{{ props.item.shop.name }}</router-link></td>\n                    <td class=\"text-truncate item-period-col\"> {{ props.item.period }}</td>\n                    <td class=\"text-truncate item-summ-number-of-surprise-box-col\">{{ props.item.summNumberOfSurpriseBox }}</td>\n                    <td class=\"text-truncate item-price-col\"><span v-t=\"'currency.rub'\"/> {{ props.item.price }}</td>\n                    <td class=\"text-truncate item-commission-col\"><span v-t=\"'currency.rub'\"/> {{ props.item.commission }}</td>\n                    <td class=\"text-truncate item-summ-to-pay-to-shop-col\"><span v-t=\"'currency.rub'\"/> {{ props.item.summToPayToShop }}</td>\n                    <td class=\"text-truncate item-summ-payed-to-shop-col\"><span v-t=\"'currency.rub'\"/> {{ props.item.summPayedToShop }}</td>\n                    <td class=\"text-truncate item-status-col\"><span v-t=\"props.item.statusStr\"/></td>\n                    <td class=\"text-truncate item-edit-col px-0\">\n                      <v-icon\n                        @click=\"openEditItemDialog(props.item)\"\n                      >mdi-border-color</v-icon>\n                    </td>\n                  </template>\n                </v-data-table>\n              </v-flex>\n            </v-layout>\n          </v-container>-->\n        </material-card>\n        <!--<v-dialog\n          v-model=\"editItemDialog\"\n          max-width=\"700px\"\n          persistent>\n          <form>\n            <v-card>\n              <v-card-title>\n                <span\n                  v-t=\"''\"\n                  class=\"headline\">{{ this.$t('payInvoiceManager.editItemTitle') }}</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container\n                  grid-list-md\n                  pt-1\n                  pb-1>\n                  <v-flex pb-1>\n                    <v-text-field\n                      v-model=\"editItemModel.shopName\"\n                      :label=\"$t('payInvoiceManager.shopName')\"\n                      readonly\n                      disabled\n                    />\n                  </v-flex>\n                  <v-flex>\n                    <v-text-field\n                      v-model=\"editItemModel.period\"\n                      :label=\"$t('payInvoiceManager.period')\"\n                      readonly\n                      disabled\n                    />\n                  </v-flex>\n                  <v-flex>\n                    <v-text-field\n                      v-model=\"editItemModel.summNumberOfSurpriseBox\"\n                      :label=\"$t('payInvoiceManager.summNumberOfSurpriseBox')\"\n                      readonly\n                      disabled\n                    />\n                  </v-flex>\n                  <v-flex>\n                    <v-text-field\n                      v-model=\"editItemModel.price\"\n                      :prefix=\"$t('currency.rub')\"\n                      :label=\"$t('payInvoiceManager.price')\"\n                      readonly\n                      disabled\n                    />\n                  </v-flex>\n                  <v-flex>\n                    <v-text-field\n                      v-model=\"editItemModel.commission\"\n                      :label=\"$t('payInvoiceManager.commission')\"\n                      :error-messages=\"commissionErrors\"\n                      :prefix=\"$t('currency.rub')\"\n                      type=\"number\"\n                      @input=\"$v.editItemModel.commission.$touch()\"\n                      @blur=\"$v.editItemModel.commission.$touch()\"\n                    />\n                  </v-flex>\n                  <v-flex>\n                    <v-text-field\n                      v-model=\"editItemModel.summToPayToShop\"\n                      :label=\"$t('payInvoiceManager.summToPayToShop')\"\n                      :prefix=\"$t('currency.rub')\"\n                      readonly\n                      disabled\n                    />\n                  </v-flex>\n                  <v-flex>\n                    <v-text-field\n                      v-model=\"editItemModel.summPayedToShop\"\n                      :label=\"$t('payInvoiceManager.summPayedToShop')\"\n                      :error-messages=\"summPayedToShopErrors\"\n                      :prefix=\"$t('currency.rub')\"\n                      type=\"number\"\n                      @input=\"$v.editItemModel.summPayedToShop.$touch()\"\n                      @blur=\"$v.editItemModel.summPayedToShop.$touch()\"\n                    />\n                  </v-flex>\n                  <v-select\n                    :items=\"statusItems\"\n                    :label=\"$t('payInvoiceManager.status')\"\n                    v-model=\"editItemModel.statusId\"\n                    :error-messages=\"statusIdErrors\"\n                    item-text=\"name\"\n                    item-value=\"id\"\n                    @input=\"$v.editItemModel.statusId.$touch()\"\n                    @blur=\"$v.editItemModel.statusId.$touch()\"\n                  />\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-container\n                  grid-list-lg\n                  pt-1\n                  pb-1>\n                  <v-layout\n                    align-end\n                    column>\n                    <v-flex>\n                      <v-btn\n                        v-t=\"'common.close'\"\n                        :color=\"color\"\n                        @click=\"closeEditItemDialog()\"\n                      />\n                      <v-btn\n                        v-t=\"'common.submit'\"\n                        :color=\"color\"\n                        @click=\"updateModel()\"\n                      />\n                    </v-flex>\n                  </v-layout>\n                </v-container>\n              </v-card-actions>\n            </v-card>\n          </form>\n        </v-dialog>-->\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\n/* import {\n  mapState\n} from 'vuex'\n\nimport {\n  PayInvoiceListByMonthGet,\n  PayInvoiceStatusGetDict,\n  PayInvoiceUpdate,\n\n  TimeworkDatePeriodOffsetFormat,\n  TimeworkMonthToDateTimeOffset,\n  TimeworkDateTimeOffsetToMonth\n} from '@/services'\n\nimport {\n  ErrorConsts\n} from '@/model'\n\nimport { required, between } from 'vuelidate/lib/validators'\n*/\nexport default {\n/*  data () {\n    return {\n      statusItems: [],\n      invoiceHeaders: [\n        {\n          text: this.$t('payInvoiceManager.shopName'),\n          align: 'left',\n          value: 'shopName'\n        },\n        { text: this.$t('payInvoiceManager.period'), value: 'period' },\n        { text: this.$t('payInvoiceManager.summNumberOfSurpriseBox'), value: 'summNumberOfSurpriseBox' },\n        { text: this.$t('payInvoiceManager.price'), value: 'price' },\n        { text: this.$t('payInvoiceManager.commission'), value: 'commission' },\n        { text: this.$t('payInvoiceManager.summToPayToShop'), value: 'summToPayToShop' },\n        { text: this.$t('payInvoiceManager.summPayedToShop'), value: 'summPayedToShop' },\n        { text: this.$t('payInvoiceManager.status'), value: 'status' },\n        { text: '', value: 'edit', sortable: false }\n      ],\n      invoiceItems: [],\n      pagination: {},\n      invoiceTotal: 0,\n      editItemDialog: false,\n      editItemModel: {\n        shopName: '',\n        summNumberOfSurpriseBox: '',\n        price: '',\n        commission: '',\n        summToPayToShop: '',\n        summPayedToShop: '',\n        statusId: ''\n      },\n      dateFilter: '',\n      dateFilterDisplay: ''\n    }\n  },\n  validations: {\n    editItemModel: {\n      statusId: { required },\n      commission: { required, between: between(0, ErrorConsts.VALIDATION_MAX_VALUE_SMALLNORMAL) },\n      summPayedToShop: { required, between: between(0, ErrorConsts.VALIDATION_MAX_VALUE_SMALLNORMAL) }\n    }\n  },\n  computed: {\n    ...mapState('app', ['color']),\n    commissionErrors () {\n      const errors = []\n      if (!this.$v.editItemModel.commission.$dirty) return errors\n      !this.$v.editItemModel.commission.required && errors.push(this.$t('error.required', { field: this.$t('payInvoiceManager.commission') }))\n      !this.$v.editItemModel.commission.between && errors.push(this.$t('error.between', { field: this.$t('payInvoiceManager.commission'), limitLow: 0, limitHigh: ErrorConsts.VALIDATION_MAX_VALUE_SMALLNORMAL }))\n      return errors\n    },\n    summPayedToShopErrors () {\n      const errors = []\n      if (!this.$v.editItemModel.summPayedToShop.$dirty) return errors\n      !this.$v.editItemModel.summPayedToShop.required && errors.push(this.$t('error.required', { field: this.$t('payInvoiceManager.summPayedToShop') }))\n      !this.$v.editItemModel.summPayedToShop.between && errors.push(this.$t('error.between', { field: this.$t('payInvoiceManager.summPayedToShop'), limitLow: 0, limitHigh: ErrorConsts.VALIDATION_MAX_VALUE_SMALLNORMAL }))\n      return errors\n    },\n    statusIdErrors () {\n      const errors = []\n      if (!this.$v.editItemModel.statusId.$dirty) return errors\n      !this.$v.editItemModel.statusId.required && errors.push(this.$t('error.required', { field: this.$t('payInvoiceManager.status') }))\n      return errors\n    }\n  },\n  watch: {\n    pagination: {\n      handler () {\n        this.getPayInvoiceList()\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    this.getPayInvoiceStatusDict()\n    this.dateFilter = TimeworkMonthToDateTimeOffset(this.$moment.utc())\n    this.dateFilterDisplay = TimeworkDateTimeOffsetToMonth(this.dateFilter)\n  },\n  methods: {\n    getPayInvoiceStatusDict () {\n      PayInvoiceStatusGetDict().then((result) => {\n        this.statusItems = result.data.items.map((item) => {\n          item.name = this.$t(item.name)\n          return item\n        })\n      })\n    },\n    getPayInvoiceList () {\n      var requestModel = Object.assign(this.pagination, { dateFilter: this.dateFilter })\n      PayInvoiceListByMonthGet(requestModel).then((result) => {\n        this.invoiceItems = result.data.items.map((item) => {\n          item.period = TimeworkDatePeriodOffsetFormat(item.dateTimeStart, item.dateTimeFinish)\n          return item\n        })\n        this.invoiceTotal = result.data.total\n      })\n    },\n    openEditItemDialog (item) {\n      this.editItemModel = Object.assign(this.editItemModel, item)\n      this.editItemDialog = true\n    },\n    closeEditItemDialog () {\n      this.editItemDialog = false\n    },\n    updateModel () {\n      this.$v.editItemModel.$touch()\n      if (!this.$v.editItemModel.$invalid) {\n        var requestModel = { payInvoiceDto: this.editItemModel }\n        PayInvoiceUpdate(requestModel).then(() => {\n          this.editItemDialog = false\n          this.getPayInvoiceList()\n        })\n      }\n    },\n    parseDateFilterAndRefresh (val) {\n      if (val !== this.dateFilterDisplay) {\n        this.dateFilter = TimeworkMonthToDateTimeOffset(val)\n        this.dateFilterDisplay = val\n        this.getPayInvoiceList()\n      }\n    }\n  } */\n}\n</script>\n\n<style scoped>\n    .item-shop-name-col\n    {\n        max-width: 206px;\n        min-width: 100px;\n    }\n    .item-period-col\n    {\n        max-width: 180px;\n    }\n    .item-summ-number-of-surprise-box-col\n    {\n        max-width: 100px;\n    }\n    .item-price-col\n    {\n        max-width: 100px;\n    }\n    .item-commission-col\n    {\n        max-width: 100px;\n    }\n    .item-summ-to-pay-to-shop-col\n    {\n        max-width: 100px;\n    }\n    .item-summ-payed-to-shop-col\n    {\n        max-width: 100px;\n    }\n    .item-status-col\n    {\n        max-width: 100px;\n        min-width: 80px;\n    }\n    .item-edit-col\n    {\n        min-width: 35px;\n        max-width: 50px;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InvoiceManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InvoiceManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InvoiceManager.vue?vue&type=template&id=03e20aee&scoped=true&\"\nimport script from \"./InvoiceManager.vue?vue&type=script&lang=js&\"\nexport * from \"./InvoiceManager.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InvoiceManager.vue?vue&type=style&index=0&id=03e20aee&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03e20aee\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}